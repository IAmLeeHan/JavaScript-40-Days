<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<style>
			#div1{width: 200px; height: 150px; padding: 50px; border: 1px solid black; margin: 100px auto;text-align: center}
			#username{width: 200px; height: 30px; font-size: 16px; margin-bottom: 5px}
			#username_span{color: red; font-size: 13px}
		</style>
		<script>
			/*
				失去焦点
				blur

				【注】要去修改双标签中间的内容用 innerHTML属性
			*/
			function testUsername(){
				//获取标签节点
				var oUsername = document.getElementById("username");
				var oUsername_span = document.getElementById("username_span");
				//表单验证
				var oValue = oUsername.value;
				oValue = oValue.replace(/ /g, "");
				oUsername.value = oValue;

				//1、用户名长度
				if(oValue.length > 18 || oValue.length < 6){
					oUsername_span.innerHTML = "长度应为6~18个字符";
				}else if(oValue[0] >= "0" && oValue[0] <= "9"){
					oUsername_span.innerHTML = "首字母不能是数字";
				}else{
					//整个用户名是否都是数字、字母、下划线组成
					var isYes = true; //假设所有字符都符合条件
					for(var i = 0; i < oValue.length; i++){
						if(!isABC(oValue[i])){
							isYes = false;
							break;
						}
					}

					if(isYes){
						oUsername_span.innerHTML = "输入正确√";
					}else{
						oUsername_span.innerHTML = '用户名必须由数字、字母下划线组成'
					}
				}
			} 



			//判断单个字符是否都是数字、字母、下划线

			function isABC(charStr){
				if(charStr >= "A" && charStr <= "Z" || charStr >= "a" && charStr <= "z" || charStr >= "0" && charStr <= "9" || charStr == "_"){
					return true;
				}else{
					return false;
				}
			}

		</script>
	</head>
	<body>
		<div id = 'div1'>
			<input type="text" placeholder="用户名" id = 'username' onblur="testUsername();"><br/>
			<span id = 'username_span'>6~18个字符，可使用字母、数字、下划线，需以字母开头</span>
		</div>
	</body>
</html>